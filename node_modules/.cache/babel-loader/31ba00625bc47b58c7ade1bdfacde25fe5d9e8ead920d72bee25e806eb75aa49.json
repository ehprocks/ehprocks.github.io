{"ast":null,"code":"// src/index.ts\nvar hasSetup = false;\nvar modality = null;\nvar hasEventBeforeFocus = false;\nvar hasBlurredWindowRecently = false;\nvar handlers = /* @__PURE__ */new Set();\nfunction trigger(modality2, event) {\n  handlers.forEach(function (handler) {\n    return handler(modality2, event);\n  });\n}\nvar isMac = typeof window !== \"undefined\" && window.navigator != null ? /^Mac/.test(window.navigator.platform) : false;\nfunction isValidKey(e) {\n  return !(e.metaKey || !isMac && e.altKey || e.ctrlKey || e.key === \"Control\" || e.key === \"Shift\" || e.key === \"Meta\");\n}\nfunction onKeyboardEvent(event) {\n  hasEventBeforeFocus = true;\n  if (isValidKey(event)) {\n    modality = \"keyboard\";\n    trigger(\"keyboard\", event);\n  }\n}\nfunction onPointerEvent(event) {\n  modality = \"pointer\";\n  if (event.type === \"mousedown\" || event.type === \"pointerdown\") {\n    hasEventBeforeFocus = true;\n    var target = event.composedPath ? event.composedPath()[0] : event.target;\n    var matches = false;\n    try {\n      matches = target.matches(\":focus-visible\");\n    } catch (_unused) {}\n    if (matches) return;\n    trigger(\"pointer\", event);\n  }\n}\nfunction isVirtualClick(event) {\n  if (event.mozInputSource === 0 && event.isTrusted) return true;\n  return event.detail === 0 && !event.pointerType;\n}\nfunction onClickEvent(e) {\n  if (isVirtualClick(e)) {\n    hasEventBeforeFocus = true;\n    modality = \"virtual\";\n  }\n}\nfunction onWindowFocus(event) {\n  if (event.target === window || event.target === document) {\n    return;\n  }\n  if (!hasEventBeforeFocus && !hasBlurredWindowRecently) {\n    modality = \"virtual\";\n    trigger(\"virtual\", event);\n  }\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = false;\n}\nfunction onWindowBlur() {\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = true;\n}\nfunction isFocusVisible() {\n  return modality !== \"pointer\";\n}\nfunction setupGlobalFocusEvents() {\n  if (typeof window === \"undefined\" || hasSetup) {\n    return;\n  }\n  var focus = HTMLElement.prototype.focus;\n  HTMLElement.prototype.focus = function focusElement() {\n    hasEventBeforeFocus = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    focus.apply(this, args);\n  };\n  document.addEventListener(\"keydown\", onKeyboardEvent, true);\n  document.addEventListener(\"keyup\", onKeyboardEvent, true);\n  document.addEventListener(\"click\", onClickEvent, true);\n  window.addEventListener(\"focus\", onWindowFocus, true);\n  window.addEventListener(\"blur\", onWindowBlur, false);\n  if (typeof PointerEvent !== \"undefined\") {\n    document.addEventListener(\"pointerdown\", onPointerEvent, true);\n    document.addEventListener(\"pointermove\", onPointerEvent, true);\n    document.addEventListener(\"pointerup\", onPointerEvent, true);\n  } else {\n    document.addEventListener(\"mousedown\", onPointerEvent, true);\n    document.addEventListener(\"mousemove\", onPointerEvent, true);\n    document.addEventListener(\"mouseup\", onPointerEvent, true);\n  }\n  hasSetup = true;\n}\nfunction trackFocusVisible(fn) {\n  setupGlobalFocusEvents();\n  fn(isFocusVisible());\n  var handler = function handler() {\n    return fn(isFocusVisible());\n  };\n  handlers.add(handler);\n  return function () {\n    handlers.delete(handler);\n  };\n}\nfunction trackInteractionModality(fn) {\n  setupGlobalFocusEvents();\n  fn(modality);\n  var handler = function handler() {\n    return fn(modality);\n  };\n  handlers.add(handler);\n  return function () {\n    handlers.delete(handler);\n  };\n}\nfunction setInteractionModality(value) {\n  modality = value;\n  trigger(value, null);\n}\nfunction getInteractionModality() {\n  return modality;\n}\nexport { getInteractionModality, setInteractionModality, trackFocusVisible, trackInteractionModality };","map":{"version":3,"names":["hasSetup","modality","hasEventBeforeFocus","hasBlurredWindowRecently","handlers","Set","trigger","modality2","event","forEach","handler","isMac","window","navigator","test","platform","isValidKey","e","metaKey","altKey","ctrlKey","key","onKeyboardEvent","onPointerEvent","type","target","composedPath","matches","_unused","isVirtualClick","mozInputSource","isTrusted","detail","pointerType","onClickEvent","onWindowFocus","document","onWindowBlur","isFocusVisible","setupGlobalFocusEvents","focus","HTMLElement","prototype","focusElement","_len","arguments","length","args","Array","_key","apply","addEventListener","PointerEvent","trackFocusVisible","fn","add","delete","trackInteractionModality","setInteractionModality","value","getInteractionModality"],"sources":["C:/Users/Tommaso G/Documents/GitHub/ehprocks.github.io/node_modules/@zag-js/focus-visible/dist/index.mjs"],"sourcesContent":["// src/index.ts\nvar hasSetup = false;\nvar modality = null;\nvar hasEventBeforeFocus = false;\nvar hasBlurredWindowRecently = false;\nvar handlers = /* @__PURE__ */ new Set();\nfunction trigger(modality2, event) {\n  handlers.forEach((handler) => handler(modality2, event));\n}\nvar isMac = typeof window !== \"undefined\" && window.navigator != null ? /^Mac/.test(window.navigator.platform) : false;\nfunction isValidKey(e) {\n  return !(e.metaKey || !isMac && e.altKey || e.ctrlKey || e.key === \"Control\" || e.key === \"Shift\" || e.key === \"Meta\");\n}\nfunction onKeyboardEvent(event) {\n  hasEventBeforeFocus = true;\n  if (isValidKey(event)) {\n    modality = \"keyboard\";\n    trigger(\"keyboard\", event);\n  }\n}\nfunction onPointerEvent(event) {\n  modality = \"pointer\";\n  if (event.type === \"mousedown\" || event.type === \"pointerdown\") {\n    hasEventBeforeFocus = true;\n    const target = event.composedPath ? event.composedPath()[0] : event.target;\n    let matches = false;\n    try {\n      matches = target.matches(\":focus-visible\");\n    } catch {\n    }\n    if (matches)\n      return;\n    trigger(\"pointer\", event);\n  }\n}\nfunction isVirtualClick(event) {\n  if (event.mozInputSource === 0 && event.isTrusted)\n    return true;\n  return event.detail === 0 && !event.pointerType;\n}\nfunction onClickEvent(e) {\n  if (isVirtualClick(e)) {\n    hasEventBeforeFocus = true;\n    modality = \"virtual\";\n  }\n}\nfunction onWindowFocus(event) {\n  if (event.target === window || event.target === document) {\n    return;\n  }\n  if (!hasEventBeforeFocus && !hasBlurredWindowRecently) {\n    modality = \"virtual\";\n    trigger(\"virtual\", event);\n  }\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = false;\n}\nfunction onWindowBlur() {\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = true;\n}\nfunction isFocusVisible() {\n  return modality !== \"pointer\";\n}\nfunction setupGlobalFocusEvents() {\n  if (typeof window === \"undefined\" || hasSetup) {\n    return;\n  }\n  const { focus } = HTMLElement.prototype;\n  HTMLElement.prototype.focus = function focusElement(...args) {\n    hasEventBeforeFocus = true;\n    focus.apply(this, args);\n  };\n  document.addEventListener(\"keydown\", onKeyboardEvent, true);\n  document.addEventListener(\"keyup\", onKeyboardEvent, true);\n  document.addEventListener(\"click\", onClickEvent, true);\n  window.addEventListener(\"focus\", onWindowFocus, true);\n  window.addEventListener(\"blur\", onWindowBlur, false);\n  if (typeof PointerEvent !== \"undefined\") {\n    document.addEventListener(\"pointerdown\", onPointerEvent, true);\n    document.addEventListener(\"pointermove\", onPointerEvent, true);\n    document.addEventListener(\"pointerup\", onPointerEvent, true);\n  } else {\n    document.addEventListener(\"mousedown\", onPointerEvent, true);\n    document.addEventListener(\"mousemove\", onPointerEvent, true);\n    document.addEventListener(\"mouseup\", onPointerEvent, true);\n  }\n  hasSetup = true;\n}\nfunction trackFocusVisible(fn) {\n  setupGlobalFocusEvents();\n  fn(isFocusVisible());\n  const handler = () => fn(isFocusVisible());\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction trackInteractionModality(fn) {\n  setupGlobalFocusEvents();\n  fn(modality);\n  const handler = () => fn(modality);\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction setInteractionModality(value) {\n  modality = value;\n  trigger(value, null);\n}\nfunction getInteractionModality() {\n  return modality;\n}\nexport {\n  getInteractionModality,\n  setInteractionModality,\n  trackFocusVisible,\n  trackInteractionModality\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}